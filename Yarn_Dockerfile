FROM alpine:latest
MAINTAINER johannk


# setup jdk 
RUN echo "http://dl-4.alpinelinux.org/alpine/edge/community" >> /etc/apk/repositories \
    && apk add --update \
    curl openjdk8 openssh ruby bash cracklib-words supervisor procps \
    && rm /var/cache/apk/*
ENV JAVA_HOME /usr/lib/jvm/default-jvm 
ENV PATH ${JAVA_HOME}/bin:${PATH}

# hadoop
ENV HADOOP_VERSION 2.7.2
RUN curl "http://mirrors.ukfast.co.uk/sites/ftp.apache.org/hadoop/common/hadoop-$HADOOP_VERSION/hadoop-$HADOOP_VERSION.tar.gz" \
	| tar -C /usr/local/ -xz | ln -s /usr/local/hadoop-$HADOOP_VERSION/ /usr/local/hadoop && rm -Rf /usr/local/hadoop/share/doc/ 
 
RUN rm -rf  /usr/local/hadoop/etc/hadoop/*.cmd && chmod +x /usr/local/hadoop/etc/hadoop/*.sh 